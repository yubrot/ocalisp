NATIVE_ENABLED = $(OCAMLOPT_EXISTS)
BYTE_ENABLED = $(not $(NATIVE_ENABLED))
MENHIR_ENABLED = true

OCAMLFLAGS += -safe-string
MENHIR_FLAGS += --infer --explain

USE_OCAMLFIND = true

.SUBDIRS: lib driver
	
.PHONY: all test
.DEFAULT: all

all: ocalisp test

ocalisp: driver/ocalisp$(EXE)
	cp driver/ocalisp$(EXE) .

test: ocalisp lispboot/test
	./ocalisp -test lispboot/test
