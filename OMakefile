NATIVE_ENABLED = $(OCAMLOPT_EXISTS)
BYTE_ENABLED = $(not $(NATIVE_ENABLED))

OCAMLFLAGS += -safe-string -w @A-4-9-29-30-40-42

USE_OCAMLFIND = true

.SUBDIRS: lib driver
	
.PHONY: all test
.DEFAULT: all

all: ocalisp$(EXE) test

ocalisp$(EXE): driver/ocalisp$(EXE)
	cp driver/ocalisp$(EXE) .

test: ocalisp$(EXE) lispboot/test
	./ocalisp$(EXE) -test lispboot/test
